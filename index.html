<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MultiGenio - Tu aliado en el aprendizaje</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary-color: #3f68a2; /* Azul más suave */
      --secondary-color: #6ed3b3; /* Azul verdoso del logo */
      --accent-color: #f39c12; /* Naranja para énfasis */
      --text-dark: #34495e;
      --text-light: #5e6c7d;
      --bg-light: #f8f9fa;
      --bg-white: #ffffff;
      --shadow-light: rgba(0, 0, 0, 0.08);
      --border-radius: 10px;
    }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: var(--bg-light);
      color: var(--text-light);
      line-height: 1.7;
    }

    /* Header */
    header {
      background: var(--primary-color);
      color: var(--bg-white);
      padding: 30px 20px;
      text-align: center;
      box-shadow: 0 2px 10px var(--shadow-light);
    }
    header .logo-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px; /* Espacio entre logo y texto */
      margin-bottom: 10px;
    }
    header .logo-container img {
      height: 80px; /* Tamaño del logo */
      width: auto;
    }
    header h1 {
      font-size: 3em;
      margin: 0;
      font-weight: 700;
      line-height: 1;
    }
    header p {
      font-size: 1.3em;
      margin-top: 5px;
      font-weight: 300;
    }

    /* Navigation */
    nav {
      background: var(--secondary-color);
      display: flex;
      justify-content: center;
      padding: 15px 0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    nav a {
      color: var(--bg-white);
      margin: 0 20px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1em;
      padding: 5px 0;
      transition: color 0.3s ease, border-bottom 0.3s ease;
      border-bottom: 2px solid transparent;
    }
    nav a:hover {
      color: var(--accent-color);
      border-bottom: 2px solid var(--accent-color);
    }

    /* Hero Section */
    .hero {
      padding: 80px 20px;
      text-align: center;
      background: linear-gradient(to bottom right, #e0f7fa, #f0f8ff);
      color: var(--text-dark);
    }
    .hero h1 {
      font-size: 3.2em;
      margin-bottom: 20px;
      font-weight: 700;
      color: var(--primary-color);
      line-height: 1.2;
    }
    .hero p {
      font-size: 1.4em;
      color: var(--text-light);
      max-width: 700px;
      margin: 0 auto;
      font-weight: 400;
    }

    /* Sections */
    .section {
      padding: 60px 20px;
      max-width: 1100px;
      margin: 0 auto;
    }
    .section h2, .section h3 {
      text-align: center;
      color: var(--primary-color);
      margin-bottom: 30px;
      font-size: 2.5em;
      font-weight: 700;
      position: relative;
    }
    .section h2::after, .section h3::after {
        content: '';
        display: block;
        width: 80px;
        height: 4px;
        background: var(--secondary-color);
        margin: 15px auto 0;
        border-radius: 2px;
    }
    .section p {
        font-size: 1.1em;
        margin-bottom: 1.5em;
        color: var(--text-light);
    }
    .section ul {
        list-style: none;
        padding-left: 0;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        margin-top: 30px;
    }
    .section ul li {
        background: var(--bg-white);
        padding: 15px 25px;
        border-radius: var(--border-radius);
        box-shadow: 0 4px 15px var(--shadow-light);
        font-size: 1.15em;
        color: var(--text-dark);
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: transform 0.3s ease;
    }
    .section ul li:hover {
        transform: translateY(-5px);
    }
    .section ul li img { /* For icons in lists */
        height: 30px;
        width: 30px;
    }
    .section img { /* General images within sections */
      display: block;
      margin: 0 auto 30px;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 15px var(--shadow-light);
    }

    /* Cards */
    .cards {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
      margin-top: 30px;
    }
    .card {
      background: var(--bg-white);
      border-radius: var(--border-radius);
      box-shadow: 0 6px 20px var(--shadow-light);
      padding: 30px;
      width: 300px;
      text-align: center;
      transition: transform 0.4s ease, box-shadow 0.4s ease;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    }
    .card img {
      width: 80px; /* Bigger icons for cards */
      height: 80px;
      margin-bottom: 20px;
      transition: transform 0.3s ease;
    }
    .card:hover img {
        transform: scale(1.1);
    }
    .card h3 {
      font-size: 1.8em;
      color: var(--primary-color);
      margin-bottom: 15px;
      font-weight: 700;
    }
    .card p {
      font-size: 1em;
      color: var(--text-light);
      line-height: 1.6;
    }
    .clickable-card {
      cursor: pointer;
    }
    .card-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(63, 104, 162, 0.95); /* Usar --primary-color con opacidad */
      color: var(--bg-white);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
      font-weight: 600;
      font-size: 1.5em;
      border-radius: var(--border-radius);
    }
    .clickable-card:hover .card-overlay {
      opacity: 1;
    }

    /* Subject Pages */
    .subject-page {
      display: none;
      padding: 40px 20px;
    }
    .subject-page.active {
      display: block;
    }
    .back-button {
      background: var(--secondary-color);
      color: var(--bg-white);
      border: none;
      padding: 12px 25px;
      border-radius: var(--border-radius);
      cursor: pointer;
      margin-bottom: 30px;
      font-size: 1.1em;
      font-weight: 600;
      transition: background 0.3s ease, transform 0.2s ease;
      display: inline-block; /* Para que margin-bottom funcione mejor */
    }
    .back-button:hover {
      background: var(--primary-color);
      transform: translateY(-2px);
    }
    .subject-page h1 {
      text-align: center;
      color: var(--primary-color);
      font-size: 3em;
      margin-bottom: 40px;
      font-weight: 700;
    }
    .subject-page .topic-list {
      background: var(--bg-white);
      border-radius: var(--border-radius);
      padding: 30px;
      margin: 30px 0;
      box-shadow: 0 4px 15px var(--shadow-light);
    }
    .subject-page .topic-list h2 {
      text-align: center;
      color: var(--text-dark);
      margin-bottom: 25px;
      font-size: 2em;
      font-weight: 600;
    }
    .topic-item {
      background: #fdfdfd; /* Blanco más claro */
      margin: 15px 0;
      padding: 20px;
      border-radius: var(--border-radius);
      border-left: 5px solid var(--secondary-color);
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      display: flex;
      flex-direction: column;
    }
    .topic-item:hover {
      background: #eef5fb; /* Ligeramente azulado al hover */
      transform: translateX(8px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .topic-title {
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 8px;
      font-size: 1.25em;
      display: flex;
      align-items: center;
      justify-content: space-between; /* Para alinear el badge y el indicador de progreso */
    }
    .topic-description {
      color: var(--text-light);
      font-size: 0.95em;
    }
    .level-badge {
      display: inline-block;
      background: var(--accent-color);
      color: var(--bg-white);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85em;
      margin-left: 15px;
      font-weight: 600;
    }
    .progress-indicator {
      font-size: 0.9em;
      font-weight: 600;
      color: green;
      margin-left: auto; /* Empuja el indicador a la derecha */
    }

    /* Contact Form */
    .contact-form {
      text-align: center;
      background: var(--bg-white);
      padding: 40px;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 15px var(--shadow-light);
      max-width: 700px;
      margin: 0 auto;
    }
    .contact-form p {
      font-size: 1.1em;
      margin-bottom: 25px;
      color: var(--text-dark);
    }
    .contact-form input,
    .contact-form textarea {
      width: calc(100% - 40px); /* Ajuste para padding */
      padding: 15px 20px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      font-size: 1.1em;
      color: var(--text-dark);
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    .contact-form input:focus,
    .contact-form textarea:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(63, 104, 162, 0.2);
      outline: none;
    }
    .contact-form button {
      background: var(--primary-color);
      color: white;
      padding: 15px 30px;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 1.2em;
      font-weight: 600;
      transition: background 0.3s ease, transform 0.2s ease;
      margin-top: 20px;
    }
    .contact-form button:hover {
      background: var(--secondary-color);
      transform: translateY(-2px);
    }

    /* Footer */
    footer {
      background: var(--primary-color);
      color: white;
      text-align: center;
      padding: 25px;
      margin-top: 50px;
      font-size: 0.95em;
    }

    /* Quiz Styles */
    #quiz-container {
      background: var(--bg-white);
      max-width: 550px;
      margin: 60px auto;
      padding: 40px;
      border-radius: var(--border-radius);
      box-shadow: 0 8px 25px var(--shadow-light);
      /* Asegura que el cuestionario se muestre al inicio */
      display: block; 
    }
    #quiz-container h2 {
      color: var(--primary-color);
      margin-bottom: 30px;
      text-align: center;
      font-size: 2.2em;
      font-weight: 700;
    }
    .question {
      margin-bottom: 25px;
      font-weight: 600;
      font-size: 1.3em;
      color: var(--text-dark);
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .options button {
      width: 100%;
      padding: 15px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 1.1em;
      transition: background 0.3s ease, transform 0.2s ease;
      text-align: left;
    }
    .options button:hover {
      background: var(--secondary-color);
      transform: translateY(-2px);
    }
    /* Updated hidden utility class */
    .hidden {
      display: none !important; /* Added !important to ensure override */
    }
    /* Result Styles */
    #result-message {
      font-weight: 700;
      text-align: center;
      margin-bottom: 1.5rem;
      color: var(--primary-color);
      font-size: 1.5em;
      background: #eef5fb;
      padding: 15px;
      border-radius: var(--border-radius);
      border-left: 5px solid var(--secondary-color);
    }
    /* ADHD Recommendations */
    #tdah-warning {
      margin-top: 2.5rem;
      padding: 1.5rem;
      background-color: #ffe0b2; /* Tono naranja suave */
      border-radius: var(--border-radius);
      color: #b35900;
      font-weight: 600;
      max-width: 750px;
      margin-left: auto;
      margin-right: auto;
      border-left: 5px solid var(--accent-color);
      font-size: 1.1em;
    }
    #study-advice {
      max-width: 750px;
      margin: 0 auto 2rem auto;
      font-weight: 600;
      color: var(--text-dark);
      padding: 1.5rem;
      background: var(--bg-white);
      border-radius: var(--border-radius);
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      border-left: 5px solid var(--primary-color);
      font-size: 1.1em;
    }

    /* Progress Bar Styles */
    .progress-bar-container {
      width: 100%;
      background-color: #e0e0e0;
      border-radius: var(--border-radius);
      overflow: hidden;
      margin-bottom: 25px;
      height: 30px;
      position: relative;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }
    .progress-bar-fill {
      height: 100%;
      background-color: var(--secondary-color); /* Green color for progress */
      width: 0%; /* Will be updated by JS */
      border-radius: var(--border-radius) 0 0 var(--border-radius);
      transition: width 0.5s ease-in-out;
    }
    .progress-text {
      position: absolute;
      width: 100%;
      text-align: center;
      line-height: 30px;
      color: var(--text-dark);
      font-weight: 600;
      font-size: 1em;
    }

    /* Lesson Content Display */
    #lesson-content-display {
        background: var(--bg-white);
        max-width: 900px;
        margin: 60px auto;
        padding: 40px;
        border-radius: var(--border-radius);
        box-shadow: 0 8px 25px var(--shadow-light);
        min-height: 500px; /* Para que no se vea vacío */
        display: none; /* Initially hidden */
    }
    #lesson-content-display.active {
        display: block;
    }
    #lesson-content-display h2 {
        text-align: center;
        color: var(--primary-color);
        margin-bottom: 30px;
        font-size: 2.2em;
        font-weight: 700;
    }
    #lesson-material p {
        font-size: 1.1em;
        margin-bottom: 1.5em;
        color: var(--text-light);
    }
    #lesson-material video,
    #lesson-material audio,
    #lesson-material img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 25px auto;
        border-radius: var(--border-radius);
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    #lesson-material textarea {
        width: calc(100% - 40px);
        padding: 15px 20px;
        border: 1px solid #ddd;
        border-radius: var(--border-radius);
        font-family: 'Poppins', sans-serif;
        font-size: 1em;
        min-height: 120px;
        margin-top: 15px;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
    }
    #lesson-material .interactive-game-placeholder {
        background-color: #eef5fb; /* Tono azul claro */
        border: 2px dashed var(--secondary-color);
        padding: 60px;
        text-align: center;
        font-style: italic;
        color: var(--text-light);
        border-radius: var(--border-radius);
        margin: 30px 0;
        font-size: 1.2em;
    }
    #lesson-material button {
        background: var(--accent-color);
        color: white;
        padding: 12px 25px;
        border: none;
        border-radius: var(--border-radius);
        cursor: pointer;
        font-size: 1.1em;
        font-weight: 600;
        transition: background 0.3s ease, transform 0.2s ease;
        margin-top: 20px;
    }
    #lesson-material button:hover {
        background: #e67e22; /* Tono más oscuro de naranja */
        transform: translateY(-2px);
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      header h1 {
        font-size: 2.2em;
      }
      header .logo-container img {
        height: 60px;
      }
      .hero h1 {
        font-size: 2.5em;
      }
      .hero p {
        font-size: 1em;
      }
      nav {
        flex-direction: column;
        align-items: center;
        padding: 10px;
      }
      nav a {
        margin: 5px 0;
        font-size: 1em;
      }
      .section h2, .section h3 {
        font-size: 2em;
      }
      .cards, .testimonials-grid {
        flex-direction: column;
        align-items: center;
      }
      .card, .testimonial-card {
        width: 90%;
        max-width: 350px;
      }
      .contact-form input,
      .contact-form textarea {
        width: calc(100% - 20px);
        padding: 12px 10px;
      }
      #quiz-container, #lesson-content-display {
        margin: 30px auto;
        padding: 25px;
      }
      .question {
        font-size: 1.1em;
      }
    }
  </style>
</head>
<body>

  <div id="quiz-container">
    <h2>Cuestionario de Estilo de Aprendizaje</h2>
    <div id="question-text" class="question"></div>
    <div id="options" class="options"></div>
  </div>

  <div id="main-content" class="hidden">
    <header>
      <div class="logo-container">
        <img src="Blue Modern Brain Genius And Technology Smart Mind Business Logo Template.png" alt="MultiGenio Logo" />
        <h1>MultiGenio</h1>
      </div>
      <p>Tu aliado en el aprendizaje</p>
    </header>

    <nav>
      <a href="#que-es">¿Qué es?</a>
      <a href="#materias">Materias</a>
      <a href="#beneficios">Beneficios</a>
      <a href="#testimonios">Testimonios</a>
      <a href="#contacto">Contacto</a>
    </nav>

    <section class="hero">
      <h1>Tu tutor virtual inteligente para Matemáticas, Inglés y Lengua</h1>
      <p>Un método de aprendizaje dinámico, adaptado a tu ritmo y estilo, diseñado para potenciar tu concentración y comprensión.</p>
    </section>

    <div id="result-message"></div>
    <div id="study-advice"></div>
    <div id="tdah-warning" class="hidden">
      ⚠️ Si presentas indicios de TDAH, MultiGenio te ofrecerá recursos y estrategias especiales para ayudarte a mantener la concentración y aprovechar tu estilo de aprendizaje de la forma más efectiva.
    </div>

    <section class="section" id="que-es">
      <h2>¿Qué es MultiGenio?</h2>
      <img src="https://img.icons8.com/color/96/online-support.png" alt="Estudio interactivo" style="width: 100px; height: 100px;"/>
      <p>
        <strong>MultiGenio</strong> es una plataforma educativa innovadora que revoluciona el aprendizaje, especialmente diseñada para estudiantes con **TDAH**, dificultades de atención o aquellos que buscan un método de estudio verdaderamente personalizado. A través de la integración de **Inteligencia Artificial Avanzada**, MultiGenio no solo se adapta al ritmo del alumno, sino que moldea activamente la experiencia educativa para maximizar la absorción del conocimiento y el mantenimiento del interés.
      </p>

      <h3>🧠 La Inteligencia Artificial en Acción: Un Enfoque Adaptativo</h3>
      <img src="https://img.icons8.com/color/96/artificial-intelligence.png" alt="Inteligencia Artificial" style="width: 100px; height: 100px;"/>
      <p>
        Nuestra IA propietaria va más allá de un simple algoritmo. Analiza patrones de respuesta en el cuestionario inicial, el progreso en los juegos interactivos, el tiempo dedicado a cada tema y las preferencias de material (visual, auditivo, etc.). Con estos datos, el sistema ajusta dinámicamente la dificultad de los ejercicios, prioriza ciertos tipos de contenido y sugiere rutas de aprendizaje alternativas. Por ejemplo, si un estudiante visual tiene dificultades con un concepto, la IA podría recomendar un video explicativo animado o un mapa mental interactivo antes de ofrecer otro tipo de ejercicio. Para alumnos con TDAH, la IA puede fragmentar lecciones extensas en módulos más cortos, incorporar micro-descansos activos o activar alertas visuales/auditivas sutiles para refocus.
      </p>
      <p>
        El objetivo es crear un "tutor virtual" que comprende las fortalezas y desafíos individuales, proporcionando una experiencia educativa que se siente hecha a la medida, minimizando las distracciones y potenciando la concentración.
      </p>

      <h2>📋 Cuestionario Inicial: Tu Huella de Aprendizaje</h2>
      <img src="https://img.icons8.com/color/96/quiz.png" alt="Cuestionario" style="width: 100px; height: 100px;"/>
      <p>
        Antes de sumergirte en el aprendizaje, MultiGenio te invita a un **cuestionario interactivo y estratégico de 5 preguntas**. Este no es un simple test; es una herramienta clave para nuestra IA. Las preguntas están cuidadosamente diseñadas para identificar tu estilo de aprendizaje predominante entre:
      </p>
      <ul>
        <li><img src="https://img.icons8.com/color/48/eye.png" alt="Visual icon"/> <strong>Visual:</strong> Aprendes mejor viendo imágenes, gráficos, diagramas y videos.</li>
        <li><img src="https://img.icons8.com/color/48/ear.png" alt="Auditivo icon"/> <strong>Auditivo:</strong> Retienes información escuchando explicaciones, debates o audios.</li>
        <li><img src="https://img.icons8.com/color/48/writing.png" alt="Lectura/Escritura icon"/> <strong>Lectura/Escritura:</strong> Tu fuerza está en leer textos, tomar notas y escribir resúmenes.</li>
        <li><img src="https://img.icons8.com/color/48/running.png" alt="Kinestésico icon"/> <strong>Kinestésico:</strong> Necesitas "hacer" para aprender; prefieres actividades prácticas y movimiento.</li>
      </ul>
      <p>
        Además, una de las preguntas está formulada para detectar indicios que podrían ser compatibles con TDAH. Si se identifican estas señales, la plataforma activará un conjunto de estrategias pedagógicas y recursos especiales, como temporizadores de foco, desafíos de atención y formatos de contenido adaptados, para asegurar una experiencia de aprendizaje óptima y libre de frustraciones. Este perfil inicial es la base sobre la cual la IA personaliza cada aspecto de tu trayectoria en MultiGenio.
      </p>
    </section>
   
    <section class="section" id="materias">
      <h2>Materias que puedes aprender</h2>
      <div class="cards">
        <div class="card clickable-card" onclick="showSubject('matematicas')">
          <img src="https://img.icons8.com/color/96/calculator.png" alt="Matemáticas" />
          <h3>Matemáticas</h3>
          <p>Desde sumas y divisiones hasta álgebra de 3º de ESO. Todo con juegos mentales, visuales y lógica adaptada a ti.</p>
          <div class="card-overlay">
            <span>¡Haz clic para empezar!</span>
          </div>
        </div>
        <div class="card clickable-card" onclick="showSubject('lengua')">
          <img src="https://img.icons8.com/color/96/book.png" alt="Lengua" />
          <h3>Lengua</h3>
          <p>Domina la morfología, sintaxis y reglas ortográficas con ejemplos creativos y prácticas fáciles de recordar.</p>
          <div class="card-overlay">
            <span>¡Haz clic para empezar!</span>
          </div>
        </div>
        <div class="card clickable-card" onclick="showSubject('ingles')">
          <img src="https://img.icons8.com/color/96/usa.png" alt="Inglés" />
          <h3>Inglés</h3>
          <p>Aprende desde A1 hasta B1: vocabulario, gramática, listening y speaking. Con apoyo visual y audios.</p>
          <div class="card-overlay">
            <span>¡Haz clic para empezar!</span>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="beneficios">
      <h2>¿Por qué elegir MultiGenio?</h2>
      <ul>
        <li><img src="https://img.icons8.com/color/48/star--v1.png" alt="Star icon"/> Explicaciones adaptadas a estudiantes con TDA/TDAH</li>
        <li><img src="https://img.icons8.com/color/48/video-camera.png" alt="Video icon"/> Videos, ejemplos y contenido creativo</li>
        <li><img src="https://img.icons8.com/color/48/brain.png" alt="Brain icon"/> Aprende a tu propio ritmo, sin presión</li>
        <li><img src="https://img.icons8.com/color/48/graduation-cap.png" alt="Graduation cap icon"/> Ideal para padres, docentes y alumnos</li>
      </ul>
    </section>

    <section class="section" id="testimonios">
      <h2>Lo que dicen nuestros alumnos</h2>
      <div class="cards testimonials-grid">
        <div class="card testimonial-card">
          <img src="https://img.icons8.com/color/96/student-male.png" alt="Estudiante 1" />
          <h3>Laura G.</h3>
          <p>"¡MultiGenio cambió mi forma de ver las matemáticas! Siempre me frustraba, pero con sus explicaciones visuales y los juegos interactivos, ahora entiendo todo mucho mejor. ¡Recomendadísimo!"</p>
          <div class="rating">⭐⭐⭐⭐⭐</div>
        </div>
        <div class="card testimonial-card">
          <img src="https://img.icons8.com/color/96/student-female.png" alt="Estudiante 2" />
          <h3>Pablo R.</h3>
          <p>"Como padre de un niño con TDAH, encontrar MultiGenio ha sido una bendición. La paciencia y el enfoque adaptado de la plataforma son increíbles. Mi hijo está motivado y aprendiendo sin estrés."</p>
          <div class="rating">⭐⭐⭐⭐⭐</div>
        </div>
        <div class="card testimonial-card">
          <img src="https://img.icons8.com/color/96/teacher.png" alt="Estudiante 3" />
          <h3>Sofía M. (Profesora)</h3>
          <p>"He probado muchas herramientas, pero MultiGenio es única por su capacidad de adaptación. La IA es una maravilla para detectar y apoyar a cada alumno según su estilo. La recomiendo a todos mis colegas."</p>
          <div class="rating">⭐⭐⭐⭐⭐</div>
        </div>
      </div>
    </section>

    <section class="section" id="contacto">
      <h2>Contacto</h2>
      <div class="contact-form">
        <p>¿Quieres probar MultiGenio o tienes dudas? Envíanos un mensaje:</p>
        <form>
          <input type="text" placeholder="Tu nombre" required /><br />
          <input type="email" placeholder="Tu correo electrónico" required /><br />
          <textarea placeholder="Tu mensaje..." rows="5" required></textarea><br />
          <button type="submit">Enviar mensaje</button>
        </form>
      </div>
    </section>

    <script>
      window.chatbaseConfig = {
        chatbotId: "frw3UKvg6MK3c9Zw-bZAu"
      };
    </script>
    <script src="https://www.chatbase.co/embed.min.js" defer></script>

    <footer>
      <p>&copy; 2025 MultiGenio. Todos los derechos reservados.</p>
    </footer>
  </div>

  <div id="matematicas-page" class="subject-page">
    <div class="section">
      <button class="back-button" onclick="showMainContent()">← Volver al inicio</button>
      <h1 style="text-align: center; color: var(--primary-color);">📊 Matemáticas</h1>
      <div id="math-personalized-intro"></div>

      <div class="progress-bar-container">
        <div class="progress-bar-fill" id="matematicas-progress-fill" style="width: 0%;"></div>
        <span class="progress-text" id="matematicas-progress-text">0% completado</span>
      </div>
      
      <div class="topic-list">
        <h2>Temario por niveles</h2>
        
        <div class="topic-item" onclick="showLessonContent('matematicas', 'operaciones-basicas')">
          <div class="topic-title">Operaciones Básicas <span class="level-badge">Primaria</span>
            <span class="progress-indicator" id="progress-matematicas-operaciones-basicas"></span>
          </div>
          <div class="topic-description">Suma, resta, multiplicación y división. Problemas prácticos del día a día.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('matematicas', 'fracciones')">
          <div class="topic-title">Fracciones y Decimales <span class="level-badge">6º Primaria</span>
            <span class="progress-indicator" id="progress-matematicas-fracciones"></span>
          </div>
          <div class="topic-description">Conceptos, operaciones y equivalencias. Con ejemplos visuales.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('matematicas', 'porcentajes')">
          <div class="topic-title">Porcentajes <span class="level-badge">1º ESO</span>
            <span class="progress-indicator" id="progress-matematicas-porcentajes"></span>
          </div>
          <div class="topic-description">Cálculo de porcentajes, aumentos y descuentos.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('matematicas', 'ecuaciones')">
          <div class="topic-title">Ecuaciones de Primer Grado <span class="level-badge">2º ESO</span>
            <span class="progress-indicator" id="progress-matematicas-ecuaciones"></span>
          </div>
          <div class="topic-description">Resolución paso a paso con métodos visuales.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('matematicas', 'sistemas')">
          <div class="topic-title">Sistemas de Ecuaciones <span class="level-badge">3º ESO</span>
            <span class="progress-indicator" id="progress-matematicas-sistemas"></span>
          </div>
          <div class="topic-description">Métodos de sustitución, igualación y reducción.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('matematicas', 'geometria')">
          <div class="topic-title">Geometría Básica <span class="level-badge">1º-2º ESO</span>
            <span class="progress-indicator" id="progress-matematicas-geometria"></span>
          </div>
          <div class="topic-description">Áreas, perímetros y volúmenes de figuras básicas.</div>
        </div>
      </div>
    </div>
  </div>

  <div id="lengua-page" class="subject-page">
    <div class="section">
      <button class="back-button" onclick="showMainContent()">← Volver al inicio</button>
      <h1 style="text-align: center; color: var(--primary-color);">📚 Lengua Española</h1>
      <div id="lengua-personalized-intro"></div>

      <div class="progress-bar-container">
        <div class="progress-bar-fill" id="lengua-progress-fill" style="width: 0%;"></div>
        <span class="progress-text" id="lengua-progress-text">0% completado</span>
      </div>
      
      <div class="topic-list">
        <h2>Temario por niveles</h2>
        
        <div class="topic-item" onclick="showLessonContent('lengua', 'ortografia-basica')">
          <div class="topic-title">Ortografía Básica <span class="level-badge">Primaria</span>
            <span class="progress-indicator" id="progress-lengua-ortografia-basica"></span>
          </div>
          <div class="topic-description">Acentuación, uso de b/v, g/j, h. Con ejercicios prácticos.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('lengua', 'morfologia')">
          <div class="topic-title">Morfología <span class="level-badge">1º ESO</span>
            <span class="progress-indicator" id="progress-lengua-morfologia"></span>
          </div>
          <div class="topic-description">Categorías gramaticales: sustantivos, adjetivos, verbos, etc.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('lengua', 'sintaxis-simple')">
          <div class="topic-title">Sintaxis - Oración Simple <span class="level-badge">2º ESO</span>
            <span class="progress-indicator" id="progress-lengua-sintaxis-simple"></span>
          </div>
          <div class="topic-description">Sujeto, predicado y complementos básicos.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('lengua', 'sintaxis-compuesta')">
          <div class="topic-title">Sintaxis - Oración Compuesta <span class="level-badge">3º ESO</span>
            <span class="progress-indicator" id="progress-lengua-sintaxis-compuesta"></span>
          </div>
          <div class="topic-description">Oraciones coordinadas y subordinadas.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('lengua', 'literatura')">
          <div class="topic-title">Literatura Española <span class="level-badge">2º-3º ESO</span>
            <span class="progress-indicator" id="progress-lengua-literatura"></span>
          </div>
          <div class="topic-description">Géneros literarios, métrica y autores principales.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('lengua', 'expresion-escrita')">
          <div class="topic-title">Expresión Escrita <span class="level-badge">Todos</span>
            <span class="progress-indicator" id="progress-lengua-expresion-escrita"></span>
          </div>
          <div class="topic-description">Técnicas de redacción, tipos de texto y coherencia.</div>
        </div>
      </div>
    </div>
  </div>

  <div id="ingles-page" class="subject-page">
    <div class="section">
      <button class="back-button" onclick="showMainContent()">← Volver al inicio</button>
      <h1 style="text-align: center; color: var(--primary-color);">🇬🇧 English</h1>
      <div id="ingles-personalized-intro"></div>

      <div class="progress-bar-container">
        <div class="progress-bar-fill" id="ingles-progress-fill" style="width: 0%;"></div>
        <span class="progress-text" id="ingles-progress-text">0% completado</span>
      </div>
      
      <div class="topic-list">
        <h2>Temario por niveles</h2>
        
        <div class="topic-item" onclick="showLessonContent('ingles', 'basic-vocabulary')">
          <div class="topic-title">Basic Vocabulary <span class="level-badge">A1</span>
            <span class="progress-indicator" id="progress-ingles-basic-vocabulary"></span>
          </div>
          <div class="topic-description">Numbers, colors, family, daily routines. Con apoyo visual.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('ingles', 'present-tenses')">
          <div class="topic-title">Present Simple & Continuous <span class="level-badge">A1-A2</span>
            <span class="progress-indicator" id="progress-ingles-present-tenses"></span>
          </div>
          <div class="topic-description">Tiempos verbales básicos con ejemplos prácticos.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('ingles', 'past-tenses')">
          <div class="topic-title">Past Simple & Past Continuous <span class="level-badge">A2</span>
            <span class="progress-indicator" id="progress-ingles-past-tenses"></span>
          </div>
          <div class="topic-description">Narración en pasado, verbos regulares e irregulares.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('ingles', 'future-tenses')">
          <div class="topic-title">Future Tenses <span class="level-badge">A2-B1</span>
            <span class="progress-indicator" id="progress-ingles-future-tenses"></span>
          </div>
          <div class="topic-description">Will, going to, present continuous for future.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('ingles', 'conditionals')">
          <div class="topic-title">Conditionals <span class="level-badge">B1</span>
            <span class="progress-indicator" id="progress-ingles-conditionals"></span>
          </div>
          <div class="topic-description">First, second and third conditional sentences.</div>
        </div>
        
        <div class="topic-item" onclick="showLessonContent('ingles', 'listening-speaking')">
          <div class="topic-title">Listening & Speaking <span class="level-badge">A1-B1</span>
            <span class="progress-indicator" id="progress-ingles-listening-speaking"></span>
          </div>
          <div class="topic-description">Ejercicios de comprensión auditiva y pronunciación.</div>
        </div>
      </div>
    </div>
  </div>

  <div id="lesson-content-display" class="hidden">
    <button class="back-button" onclick="hideLessonContent()">← Volver al temario</button>
    <h2 id="lesson-title"></h2>
    <div id="lesson-material"></div>
  </div>


  <script>
    const quizContainer = document.getElementById('quiz-container');
    const mainContent = document.getElementById('main-content');
    const questionText = document.getElementById('question-text');
    const optionsDiv = document.getElementById('options');
    const resultMessage = document.getElementById('result-message');
    const tdahWarning = document.getElementById('tdah-warning');
    const studyAdvice = document.getElementById('study-advice');
    const lessonContentDisplay = document.getElementById('lesson-content-display');

    // Preguntas del cuestionario
    const quizQuestions = [
      {
        question: "¿Cómo prefieres aprender?",
        options: [
          { text: "Viendo imágenes, gráficos o videos", value: "visual" },
          { text: "Escuchando explicaciones o audios", value: "auditivo" },
          { text: "Leyendo o escribiendo textos", value: "lectura-escritura" },
          { text: "Haciendo actividades prácticas o manipulativas", value: "kinestesico" }
        ]
      },
      {
        question: "¿Sueles tener dificultades para mantener la atención o concentración?",
        options: [
          { text: "Sí, frecuentemente", value: "tdah" },
          { text: "A veces", value: "a-veces" },
          { text: "No, casi nunca", value: "no" }
        ]
      },
      {
        question: "Cuando estudias, ¿qué te ayuda más a entender y recordar?",
        options: [
          { text: "Ver esquemas o mapas conceptuales", value: "visual" },
          { text: "Escuchar grabaciones o explicaciones en voz alta", value: "auditivo" },
          { text: "Tomar notas o leer textos varias veces", value: "lectura-escritura" },
          { text: "Hacer ejercicios prácticos o moverme mientras estudio", value: "kinestesico" }
        ]
      },
      {
        question: "¿Qué actividad prefieres para aprender algo nuevo?",
        options: [
          { text: "Observar demostraciones visuales", value: "visual" },
          { text: "Participar en discusiones o escuchar explicaciones", value: "auditivo" },
          { text: "Leer libros o escribir resúmenes", value: "lectura-escritura" },
          { text: "Experimentar y practicar directamente", value: "kinestesico" }
        ]
      },
      {
        question: "¿Cómo recuerdas mejor la información?",
        options: [
          { text: "Recordando imágenes y colores", value: "visual" },
          { text: "Recordando sonidos o palabras", value: "auditivo" },
          { text: "Recordando textos o frases escritas", value: "lectura-escritura" },
          { text: "Recordando sensaciones y movimientos", value: "kinestesico" }
        ]
      }
    ];

    let currentQuestionIndex = 0;
    let selectedAnswers = {};
    let userLearningStyle = 'visual'; // Variable global para almacenar el estilo

    // --- Data de Temas para Cálculo de Progreso ---
    const mathTopics = [
      { id: 'operaciones-basicas', text: 'Operaciones Básicas' },
      { id: 'fracciones', text: 'Fracciones y Decimales' },
      { id: 'porcentajes', text: 'Porcentajes' },
      { id: 'ecuaciones', text: 'Ecuaciones de Primer Grado' },
      { id: 'sistemas', text: 'Sistemas de Ecuaciones' },
      { id: 'geometria', text: 'Geometría Básica' }
    ];

    const lenguaTopics = [
      { id: 'ortografia-basica', text: 'Ortografía Básica' },
      { id: 'morfologia', text: 'Morfología' },
      { id: 'sintaxis-simple', text: 'Sintaxis - Oración Simple' },
      { id: 'sintaxis-compuesta', text: 'Sintaxis - Oración Compuesta' },
      { id: 'literatura', text: 'Literatura Española' },
      { id: 'expresion-escrita', text: 'Expresión Escrita' }
    ];

    const inglesTopics = [
      { id: 'basic-vocabulary', text: 'Basic Vocabulary' },
      { id: 'present-tenses', text: 'Present Simple & Continuous' },
      { id: 'past-tenses', text: 'Past Simple & Past Continuous' },
      { id: 'future-tenses', text: 'Future Tenses' },
      { id: 'conditionals', text: 'Conditionals' },
      { id: 'listening-speaking', text: 'Listening & Speaking' }
    ];

    // --- Funciones de Cuestionario ---
    function showQuestion() {
      if (currentQuestionIndex >= quizQuestions.length) {
        finishQuiz();
        return;
      }

      const currentQ = quizQuestions[currentQuestionIndex];
      questionText.textContent = currentQ.question;
      optionsDiv.innerHTML = '';
      
      currentQ.options.forEach((option, index) => {
        const btn = document.createElement('button');
        btn.textContent = option.text;
        btn.onclick = () => {
          selectedAnswers[currentQuestionIndex] = option.value;
          currentQuestionIndex++;
          showQuestion();
        };
        optionsDiv.appendChild(btn);
      });
    }

    function finishQuiz() {
      // Ocultar cuestionario
      quizContainer.classList.add('hidden');
      // Mostrar contenido principal
      mainContent.classList.remove('hidden');

      // Conteo de estilos, excepto la pregunta 1 (TDAH - índice 1)
      const styleCounts = {
        visual: 0,
        auditivo: 0,
        'lectura-escritura': 0,
        kinestesico: 0
      };

      for(let i = 0; i < quizQuestions.length; i++){
        if(i === 1) continue; // Saltar la pregunta de TDAH (índice 1)
        const ans = selectedAnswers[i];
        if(styleCounts.hasOwnProperty(ans)){
          styleCounts[ans]++;
        }
      }

      // Elegir el estilo con mayor puntuación
      let maxStyle = 'visual';
      let maxCount = 0;
      for(const style in styleCounts){
        if(styleCounts[style] > maxCount){
          maxCount = styleCounts[style];
          maxStyle = style;
        }
      }

      // Mostrar recomendaciones según estilo
      const adviceByStyle = {
        visual: "Recomendamos usar esquemas, mapas conceptuales, videos y colores para organizar tus ideas. Aprovecha imágenes y gráficos para estudiar.",
        auditivo: "Aprende mejor con grabaciones, podcasts, explicaciones en voz alta y repitiendo la información oralmente.",
        'lectura-escritura': "Prefiere leer textos, tomar apuntes, escribir resúmenes y usar listas para organizar la información.",
        kinestesico: "Es ideal aprender haciendo, usando actividades prácticas, movimientos o ejercicios mientras estudias."
      };

      // Mostrar mensaje resultado
      const styleNames = {
        visual: "Visual",
        auditivo: "Auditivo", 
        'lectura-escritura': "Lectura/Escritura",
        kinestesico: "Kinestésico"
      };

      resultMessage.textContent = `🎯 Tu estilo de aprendizaje detectado: ${styleNames[maxStyle]}`;
      studyAdvice.textContent = adviceByStyle[maxStyle] || "";
      
      // Guardar el estilo de aprendizaje globalmente
      userLearningStyle = maxStyle;

      // Mostrar advertencia TDAH si aplica
      const tdahAnswer = selectedAnswers[1]; // La pregunta TDAH está en el índice 1
      if(tdahAnswer === 'tdah'){
        tdahWarning.classList.remove('hidden');
      }

      // Cargar y actualizar el progreso al finalizar el cuestionario
      loadProgressAndDisplay();
      updateAllProgressBars();
    }

    // --- Funciones de Progreso (localStorage) ---
    function saveProgress(subject, topicId, status) {
      const progressKey = `progress_${subject}_${topicId}`;
      localStorage.setItem(progressKey, status);
      // Tras guardar, actualizamos los indicadores y las barras de progreso
      loadProgressAndDisplay();
      updateAllProgressBars();
    }

    function loadProgressAndDisplay() {
      // Actualizar indicadores individuales de tema
      [
        ...mathTopics.map(t => ({ subject: 'matematicas', topic: t })),
        ...lenguaTopics.map(t => ({ subject: 'lengua', topic: t })),
        ...inglesTopics.map(t => ({ subject: 'ingles', topic: t }))
      ].forEach(({ subject, topic }) => {
        const progressKey = `progress_${subject}_${topic.id}`;
        const status = localStorage.getItem(progressKey);
        const indicator = document.getElementById(`progress-${subject}-${topic.id}`);
        if (indicator) {
          if (status === 'completed') {
            indicator.innerHTML = '<span style="color: green; font-weight: bold; margin-left: 10px;">✅ Completado</span>';
          } else {
            indicator.innerHTML = ''; // Limpiar si no está completado
          }
        }
      });
    }

    function updateSubjectProgress(subject, topicsArray, progressFillId, progressTextId) {
      let completedCount = 0;
      topicsArray.forEach(topic => {
        const progressKey = `progress_${subject}_${topic.id}`;
        if (localStorage.getItem(progressKey) === 'completed') {
          completedCount++;
        }
      });

      const totalTopics = topicsArray.length;
      const percentage = totalTopics > 0 ? (completedCount / totalTopics) * 100 : 0;

      const progressBarFill = document.getElementById(progressFillId);
      const progressBarText = document.getElementById(progressTextId);

      if (progressBarFill && progressBarText) {
        progressBarFill.style.width = `${percentage}%`;
        progressBarText.textContent = `${Math.round(percentage)}% completado`;
      }
    }

    function updateAllProgressBars() {
      updateSubjectProgress('matematicas', mathTopics, 'matematicas-progress-fill', 'matematicas-progress-text');
      updateSubjectProgress('lengua', lenguaTopics, 'lengua-progress-fill', 'lengua-progress-text');
      updateSubjectProgress('ingles', inglesTopics, 'ingles-progress-fill', 'ingles-progress-text');
    }

    // --- Funciones de Navegación y Contenido ---
    function showSubject(subject) {
      // Ocultar contenido principal y otras páginas de asignatura
      document.getElementById('main-content').classList.add('hidden');
      document.querySelectorAll('.subject-page').forEach(page => {
        page.classList.remove('active');
        page.classList.add('hidden'); // Asegurarse de que estén ocultas
      });
      lessonContentDisplay.classList.add('hidden'); // Asegurarse que la lección esté oculta

      // Mostrar página de la asignatura
      const subjectPage = document.getElementById(subject + '-page');
      if (subjectPage) {
        subjectPage.classList.remove('hidden');
        subjectPage.classList.add('active');
      }
      
      // Personalizar introducción según el estilo de aprendizaje
      personalizeSubjectIntro(subject);
      // Actualizar barras de progreso al entrar en la asignatura
      updateAllProgressBars();
      loadProgressAndDisplay(); // Asegurar que los checks estén visibles
    }

    function showMainContent() {
      // Ocultar todas las páginas de asignaturas y el contenido de lección
      document.querySelectorAll('.subject-page').forEach(page => {
        page.classList.remove('active');
        page.classList.add('hidden');
      });
      lessonContentDisplay.classList.add('hidden'); // Asegurarse que la lección esté oculta
      
      // Mostrar contenido principal
      document.getElementById('main-content').classList.remove('hidden');
    }

    function personalizeSubjectIntro(subject) {
      const introElement = document.getElementById(subject + '-personalized-intro');
      if (!introElement) return;

      const personalizedIntros = {
        matematicas: {
          visual: "🎨 Como eres una persona con estilo **visual**, hemos preparado esquemas, gráficos y representaciones visuales para cada tema de matemáticas. ¡Verás las matemáticas de una forma completamente nueva!",
          auditivo: "🔊 Perfecto para tu estilo **auditivo**: cada lección incluye explicaciones paso a paso, podcasts matemáticos y ejercicios que puedes resolver 'hablando' contigo mismo.",
          'lectura-escritura': "📝 Ideal para tu estilo de **lectura/escritura**: encontrarás resúmenes detallados, ejercicios escritos y la posibilidad de tomar notas estructuradas en cada tema.",
          kinestesico: "🏃 ¡Matemáticas en movimiento! Hemos diseñado actividades prácticas, manipulativas y ejercicios que puedes resolver moviéndote o usando objetos físicos."
        },
        lengua: {
          visual: "🎨 Tu aprendizaje **visual** te ayudará con mapas mentales, esquemas de sintaxis y representaciones gráficas de las reglas gramaticales.",
          auditivo: "🔊 Perfecto para tu estilo: lecturas en voz alta, ejercicios de dictado, y técnicas de memorización con ritmo y sonidos.",
          'lectura-escritura': "📝 En tu elemento: análisis de textos, ejercicios de escritura creativa y técnicas de estudio basadas en la lectura comprensiva.",
          kinestesico: "🏃 Lengua activa: dramatizaciones, juegos de roles y ejercicios donde puedas moverte mientras aprendes gramática y literatura."
        },
        ingles: {
          visual: "🎨 **Visual English**: flashcards, mind maps, videos y material gráfico para aprender vocabulario y gramática de forma visual.",
          auditivo: "🔊 Perfect for you: **listening exercises**, pronunciation practice, songs and audio materials to improve your English naturally.",
          'lectura-escritura': "📝 **Reading & Writing** focus: textos graduados, ejercicios de escritura y técnicas de estudio basadas en la lectura en inglés.",
          kinestesico: "🏃 **Active English**: role-plays, interactive games y actividades prácticas para aprender inglés moviéndote y experimentando."
        }
      };

      const intro = personalizedIntros[subject] && personalizedIntros[subject][userLearningStyle];
      if (intro) {
        introElement.innerHTML = `<div style="background: #eef5fb; padding: 25px; border-radius: var(--border-radius); margin-bottom: 30px; border-left: 5px solid var(--secondary-color); font-size: 1.1em; line-height: 1.6; color: var(--text-dark);"><strong>Personalizado para ti:</strong><br>${intro}</div>`;
      }
    }

    // --- Contenido de Lecciones Dinámicas (para diferentes tipos de material) ---
    // NOTA: Para videos y audios, he usado URLs de ejemplo de W3Schools.
    // Para imágenes, he usado placeholders. DEBES REEMPLAZAR ESTOS CON TUS PROPIOS ARCHIVOS.
    const topicContents = {
      matematicas: {
        'operaciones-basicas': {
          visual: "<p>Mira este **video explicativo** animado sobre sumas y restas:</p><video controls style='width:100%; height:auto;' src='https://www.w3schools.com/html/mov_bbb.mp4' poster='https://via.placeholder.com/600x400?text=Video+Matemáticas+Visual'></video><p>Y este **diagrama** para visualizarlo:</p><img src='https://via.placeholder.com/600x300?text=Diagrama+Sumas+y+Restas' alt='Diagrama de sumas'>",
          auditivo: "<p>Escucha la **explicación detallada** de cómo sumar y restar:</p><audio controls src='https://www.w3schools.com/html/horse.mp3'></audio><p>Presta atención a cada paso, ¡puedes repetirlo cuantas veces quieras!</p>",
          'lectura-escritura': "<p>Lee el **resumen completo** sobre las operaciones básicas y luego escribe tus propias notas:</p><p>La **suma** es la operación fundamental de combinar dos o más números para obtener un total. Se representa con el signo más (+). Por ejemplo, 2 + 3 = 5. La **resta** es la operación inversa de la suma, donde se quita una cantidad de otra para encontrar la diferencia. Se representa con el signo menos (-). Por ejemplo, 5 - 2 = 3. La **multiplicación** es la suma repetida de un número, mientras que la **division** es la operación de repartir una cantidad en partes iguales.</p><textarea rows='8' cols='60' placeholder='Toma tus propias notas o crea un resumen aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>¡Resuelve problemas interactivos! **Arrastra y suelta** los números en el lugar correcto para completar las sumas. ¡Siente las matemáticas!</p><div class='interactive-game-placeholder'>Aquí iría un juego interactivo de arrastrar y soltar números para sumar/restar. (Simulado)</div><button onclick='simulateGameCompletion(\"matematicas\", \"operaciones-basicas\")'>Simular Completar Juego</button>"
        },
        'fracciones': {
          visual: "<p>Aprende fracciones con estas **imágenes y gráficos de tartas** interactivas:</p><img src='https://via.placeholder.com/600x400?text=Fracciones+Visual' alt='Fracciones visual'>",
          auditivo: "<p>Escucha la **explicación de fracciones** y sus operaciones, ideal para memorizar con el sonido:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3'></audio>",
          'lectura-escritura': "<p>Lee la **teoría de fracciones** y resuelve problemas escritos para fijar conceptos:</p><p>Una fracción es un número que representa una parte de un todo, dividido en partes iguales. Está compuesta por un numerador (parte superior) y un denominador (parte inferior)...</p><textarea rows='8' cols='60' placeholder='Crea ejemplos o un resumen de fracciones aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>Juega al **rompecabezas de fracciones** para entenderlas mejor manipulando las piezas:</p><div class='interactive-game-placeholder'>Juego interactivo de construcción de fracciones. (Simulado)</div><button onclick='simulateGameCompletion(\"matematicas\", \"fracciones\")'>Simular Completar Juego</button>"
        },
        'porcentajes': {
          visual: "<p>Visualiza cómo funcionan los porcentajes con **infografías y barras de progreso**:</p><img src='https://via.placeholder.com/600x400?text=Porcentajes+Visual' alt='Porcentajes visual'>",
          auditivo: "<p>Escucha la **lógica detrás de los porcentajes** y ejemplos prácticos hablados:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3'></audio>",
          'lectura-escritura': "<p>Domina el **cálculo de porcentajes** leyendo y resolviendo problemas paso a paso:</p><p>Para calcular un porcentaje de una cantidad, se multiplica la cantidad por el porcentaje y se divide entre 100...</p><textarea rows='8' cols='60' placeholder='Escribe tus propias fórmulas y ejemplos de porcentajes...' style='width: 100%;'></textarea>",
          kinestesico: "<p>Aplica descuentos y aumentos en una **simulación interactiva** de compras:</p><div class='interactive-game-placeholder'>Juego interactivo de cálculo de porcentajes. (Simulado)</div><button onclick='simulateGameCompletion(\"matematicas\", \"porcentajes\")'>Simular Completar Juego</button>"
        },
        'ecuaciones': {
          visual: "<p>Observa cómo se balancean las ecuaciones con un **simulador de balanza**:</p><img src='https://via.placeholder.com/600x400?text=Ecuaciones+Visual' alt='Ecuaciones visual'>",
          auditivo: "<p>Escucha una guía **paso a paso** para resolver ecuaciones de primer grado:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3'></audio>",
          'lectura-escritura': "<p>Sigue los **ejemplos resueltos** y practica escribiendo tus propias soluciones:</p><p>Una ecuación de primer grado es una igualdad matemática que tiene una o más incógnitas elevadas a la primera potencia...</p><textarea rows='8' cols='60' placeholder='Resuelve ecuaciones paso a paso aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>Mueve términos y resuelve ecuaciones con un **juego de \"resolver la X\"**:</p><div class='interactive-game-placeholder'>Juego interactivo de ecuaciones. (Simulado)</div><button onclick='simulateGameCompletion(\"matematicas\", \"ecuaciones\")'>Simular Completar Juego</button>"
        },
        'sistemas': {
          visual: "<p>Visualiza las soluciones de sistemas de ecuaciones con **gráficas interactivas**:</p><img src='https://via.placeholder.com/600x400?text=Sistemas+Visual' alt='Sistemas visual'>",
          auditivo: "<p>Escucha la **explicación de los métodos** (sustitución, igualación, reducción) para sistemas de ecuaciones:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3'></audio>",
          'lectura-escritura': "<p>Estudia los **métodos para resolver sistemas** y practica con ejercicios escritos:</p><p>Un sistema de ecuaciones es un conjunto de dos o más ecuaciones con varias incógnitas...</p><textarea rows='8' cols='60' placeholder='Resuelve sistemas de ecuaciones aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>Usa un **simulador interactivo** para practicar la resolución de sistemas de ecuaciones:</p><div class='interactive-game-placeholder'>Juego interactivo de sistemas de ecuaciones. (Simulado)</div><button onclick='simulateGameCompletion(\"matematicas\", \"sistemas\")'>Simular Completar Juego</button>"
        },
        'geometria': {
          visual: "<p>Explora las figuras geométricas con **modelos 3D interactivos** y diagramas:</p><img src='https://via.placeholder.com/600x400?text=Geometria+Visual' alt='Geometria visual'>",
          auditivo: "<p>Escucha las **descripciones y propiedades** de las figuras geométricas básicas:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3'></audio>",
          'lectura-escritura': "<p>Aprende las **fórmulas de área, perímetro y volumen** escribiéndolas y aplicándolas en problemas:</p><p>El área de un cuadrado es lado x lado. El perímetro es 4 x lado...</p><textarea rows='8' cols='60' placeholder='Dibuja y anota las fórmulas de geometría aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>Construye figuras geométricas con **piezas virtuales** y calcula sus propiedades:</p><div class='interactive-game-placeholder'>Juego interactivo de construcción geométrica. (Simulado)</div><button onclick='simulateGameCompletion(\"matematicas\", \"geometria\")'>Simular Completar Juego</button>"
        }
      },
      lengua: {
        'ortografia-basica': {
          visual: "<p>Observa los **mapas mentales** de reglas ortográficas y usa colores para recordar:</p><img src='https://via.placeholder.com/600x400?text=Ortografia+Visual' alt='Mapa mental ortografía'>",
          auditivo: "<p>Escucha un **dictado** y compruébalo, mejorando tu oído ortográfico:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3'></audio><p>Luego, compara con el texto correcto.</p>",
          'lectura-escritura': "<p>Practica con **ejercicios de rellenar huecos** y corrige tus errores en texto:</p><p>El _(gato/jjato)_ corre rápido por el _(campo/cambpo)_.</p><textarea rows='5' cols='60' placeholder='Escribe tu respuesta aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>Juego de **ordenar letras** para formar palabras correctas. ¡Siente la palabra mientras la construyes!</p><div class='interactive-game-placeholder'>Juego interactivo de ortografía: arrastra letras. (Simulado)</div><button onclick='simulateGameCompletion(\"lengua\", \"ortografia-basica\")'>Simular Completar Juego</button>"
        },
        'morfologia': {
          visual: "<p>Identifica las categorías gramaticales con **diagramas de flujo y colores**:</p><img src='https://via.placeholder.com/600x400?text=Morfologia+Visual' alt='Morfologia visual'>",
          auditivo: "<p>Escucha **ejemplos y explicaciones de las categorías gramaticales**:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3'></audio>",
          'lectura-escritura': "<p>Analiza y clasifica palabras en este **ejercicio escrito**:</p><p>Indica la categoría gramatical de cada palabra: 'La casa azul es grande'</p><textarea rows='5' cols='60' placeholder='Analiza aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Clasifica palabras** arrastrándolas a su categoría correcta en un juego interactivo:</p><div class='interactive-game-placeholder'>Juego interactivo de clasificación morfológica. (Simulado)</div><button onclick='simulateGameCompletion(\"lengua\", \"morfologia\")'>Simular Completar Juego</button>"
        },
        'sintaxis-simple': {
          visual: "<p>Entiende la estructura de la oración con **esquemas de análisis sintáctico** visuales:</p><img src='https://via.placeholder.com/600x400?text=Sintaxis+Visual' alt='Sintaxis visual'>",
          auditivo: "<p>Escucha el **análisis de oraciones simples** explicado paso a paso:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3'></audio>",
          'lectura-escritura': "<p>Practica el **análisis sintáctico** de oraciones simples escribiendo sus componentes:</p><p>Analiza la siguiente oración: 'El perro ladra mucho'.</p><textarea rows='8' cols='60' placeholder='Escribe tu análisis aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Construye oraciones** arrastrando los componentes (sujeto, predicado, complementos) a su lugar:</p><div class='interactive-game-placeholder'>Juego interactivo de construcción sintáctica. (Simulado)</div><button onclick='simulateGameCompletion(\"lengua\", \"sintaxis-simple\")'>Simular Completar Juego</button>"
        },
        'sintaxis-compuesta': {
          visual: "<p>Visualiza los tipos de oraciones compuestas con **diagramas de subordinación y coordinación**:</p><img src='https://via.placeholder.com/600x400?text=Sintaxis+Compuesta+Visual' alt='Sintaxis compuesta visual'>",
          auditivo: "<p>Escucha **ejemplos y explicaciones de oraciones coordinadas y subordinadas**:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3'></audio>",
          'lectura-escritura': "<p>**Clasifica y analiza** oraciones compuestas en este ejercicio escrito:</p><p>Clasifica la oración: 'Estudiaré cuando tenga tiempo'.</p><textarea rows='8' cols='60' placeholder='Escribe tu análisis aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Une oraciones simples** para formar compuestas en un juego interactivo:</p><div class='interactive-game-placeholder'>Juego interactivo de unión de oraciones. (Simulado)</div><button onclick='simulateGameCompletion(\"lengua\", \"sintaxis-compuesta\")'>Simular Completar Juego</button>"
        },
        'literatura': {
          visual: "<p>Explora los **géneros literarios** con infografías y líneas de tiempo visuales:</p><img src='https://via.placeholder.com/600x400?text=Literatura+Visual' alt='Literatura visual'>",
          auditivo: "<p>Escucha **fragmentos de obras clásicas** y comentarios sobre los autores:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3'></audio>",
          'lectura-escritura': "<p>Lee y **analiza textos literarios** y responde preguntas sobre ellos:</p><p>Lee el poema 'La primavera' de Antonio Machado y comenta su métrica.</p><textarea rows='8' cols='60' placeholder='Escribe tu análisis literario aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Arrastra autores a sus obras** correspondientes en un juego de memoria literaria:</p><div class='interactive-game-placeholder'>Juego interactivo de literatura. (Simulado)</div><button onclick='simulateGameCompletion(\"lengua\", \"literatura\")'>Simular Completar Juego</button>"
        },
        'expresion-escrita': {
          visual: "<p>Organiza tus ideas con **mapas conceptuales para la escritura**:</p><img src='https://via.placeholder.com/600x400?text=Expresion+Escrita+Visual' alt='Expresion escrita visual'>",
          auditivo: "<p>Escucha **consejos para mejorar la redacción** y la coherencia de textos:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3'></audio>",
          'lectura-escritura': "<p>Practica diferentes **tipos de texto** (narrativo, descriptivo, expositivo) con ejercicios de redacción:</p><p>Escribe un párrafo descriptivo sobre tu lugar favorito.</p><textarea rows='8' cols='60' placeholder='Empieza a escribir aquí...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Reorganiza párrafos** y oraciones para mejorar la fluidez y coherencia de un texto:</p><div class='interactive-game-placeholder'>Juego interactivo de coherencia textual. (Simulado)</div><button onclick='simulateGameCompletion(\"lengua\", \"expresion-escrita\")'>Simular Completar Juego</button>"
        }
      },
      ingles: {
        'basic-vocabulary': {
          visual: "<p>Learn new words with **interactive flashcards** and picture dictionaries:</p><img src='https://via.placeholder.com/600x400?text=English+Vocabulary+Visual' alt='English vocabulary visual'>",
          auditivo: "<p>Listen and **repeat the pronunciation** of basic vocabulary:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3'></audio>",
          'lectura-escritura': "<p>Read and **write definitions and example sentences** for new words:</p><p>A **dog** is a domesticated carnivorous mammal...</p><textarea rows='5' cols='60' placeholder='Write your own sentence with the word dog...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Match words to pictures** in a fun drag-and-drop game:</p><div class='interactive-game-placeholder'>Interactive vocabulary matching game. (Simulated)</div><button onclick='simulateGameCompletion(\"ingles\", \"basic-vocabulary\")'>Simular Completar Juego</button>"
        },
        'present-tenses': {
          visual: "<p>Understand present tenses with **timeline diagrams and examples**:</p><img src='https://via.placeholder.com/600x400?text=Present+Tenses+Visual' alt='Present tenses visual'>",
          auditivo: "<p>Listen to **conversations using present simple and continuous** to hear them in context:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3'></audio>",
          'lectura-escritura': "<p>Fill in the blanks and correct sentences to practice **present tenses in writing**:</p><p>She (go) _____ to school every day.</p><textarea rows='5' cols='60' placeholder='Write your answers here...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Form sentences** by ordering words correctly in present tenses:</p><div class='interactive-game-placeholder'>Interactive sentence builder for present tenses. (Simulated)</div><button onclick='simulateGameCompletion(\"ingles\", \"present-tenses\")'>Simular Completar Juego</button>"
        },
        'past-tenses': {
          visual: "<p>See how past events connect with **visual narratives** and comics:</p><img src='https://via.placeholder.com/600x400?text=Past+Tenses+Visual' alt='Past tenses visual'>",
          auditivo: "<p>Listen to **stories told in past simple and continuous** and answer comprehension questions:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3'></audio>",
          'lectura-escritura': "<p>Read short stories and **rewrite them using past tenses**:</p><p>Yesterday, I (walk) _____ to the park...</p><textarea rows='5' cols='60' placeholder='Rewrite the story in past tense...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Role-play conversations** about past events to practice speaking in past tenses:</p><div class='interactive-game-placeholder'>Interactive role-play for past tenses. (Simulated)</div><button onclick='simulateGameCompletion(\"ingles\", \"past-tenses\")'>Simular Completar Juego</button>"
        },
        'future-tenses': {
          visual: "<p>Visualize future plans with **calendars and planning diagrams**:</p><img src='https://via.placeholder.com/600x400?text=Future+Tenses+Visual' alt='Future tenses visual'>",
          auditivo: "<p>Listen to **dialogues about future plans and predictions**:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3'></audio>",
          'lectura-escritura': "<p>Write about your **future plans and predictions** using 'will', 'going to', etc.:</p><p>Next year, I (travel) _____ to Spain.</p><textarea rows='5' cols='60' placeholder='Describe your future plans...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Plan a virtual trip** by choosing activities and forming sentences in future tenses:</p><div class='interactive-game-placeholder'>Interactive future planning game. (Simulated)</div><button onclick='simulateGameCompletion(\"ingles\", \"future-tenses\")'>Simular Completar Juego</button>"
        },
        'conditionals': {
          visual: "<p>Understand conditionals with **if-then diagrams** and flowcharts:</p><img src='https://via.placeholder.com/600x400?text=Conditionals+Visual' alt='Conditionals visual'>",
          auditivo: "<p>Listen to **conditional sentences** and identify their types:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3'></audio>",
          'lectura-escritura': "<p>Complete **conditional sentences** and create your own:</p><p>If I (study) _____, I (pass) _____ the exam.</p><textarea rows='5' cols='60' placeholder='Write your own conditional sentences...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Build conditional sentences** by dragging and dropping clauses:</p><div class='interactive-game-placeholder'>Interactive conditional sentence builder. (Simulated)</div><button onclick='simulateGameCompletion(\"ingles\", \"conditionals\")'>Simular Completar Juego</button>"
        },
        'listening-speaking': {
          visual: "<p>Watch **short English video clips** and answer comprehension questions:</p><video controls style='width:100%; height:auto;' src='https://www.w3schools.com/html/mov_bbb.mp4' poster='https://via.placeholder.com/600x400?text=Listening+Video'></video>",
          auditivo: "<p>Practice your **listening comprehension** with dialogues and quizzes:</p><audio controls src='https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3'></audio><p>Then, record yourself speaking!</p>",
          'lectura-escritura': "<p>Read **transcripts of conversations** and summarize them:</p><p>Speaker A: Hi, how are you? Speaker B: I'm good, thanks!</p><textarea rows='8' cols='60' placeholder='Summarize the conversation here...' style='width: 100%;'></textarea>",
          kinestesico: "<p>**Participate in interactive dialogues** with prompts and role-playing scenarios:</p><div class='interactive-game-placeholder'>Interactive speaking practice. (Simulated)</div><button onclick='simulateGameCompletion(\"ingles\", \"listening-speaking\")'>Simular Completar Juego</button>"
        }
      }
    };

    function showLessonContent(subject, topicId) {
        // Ocultar todas las páginas de asignaturas y el contenido principal
        document.getElementById('main-content').classList.add('hidden'); // Oculta el contenido principal
        document.querySelectorAll('.subject-page').forEach(page => page.classList.add('hidden')); // Oculta las páginas de asignatura

        // Mostrar el contenedor de la lección
        lessonContentDisplay.classList.remove('hidden'); // Asegurarse de que esté visible
        lessonContentDisplay.classList.add('active'); // Activar para posibles estilos de transición

        const lessonTitleElement = document.getElementById('lesson-title');
        const lessonMaterialElement = document.getElementById('lesson-material');

        const topicName = (topicId.replace(/-/g, ' ').charAt(0).toUpperCase() + topicId.replace(/-/g, ' ').slice(1));
        lessonTitleElement.textContent = `Lección: ${topicName} de ${subject.charAt(0).toUpperCase() + subject.slice(1)}`;

        // Obtener el contenido adaptado al estilo de aprendizaje del usuario
        let contentHtml = topicContents[subject] && topicContents[subject][topicId] && topicContents[subject][topicId][userLearningStyle];

        if (contentHtml) {
            lessonMaterialElement.innerHTML = contentHtml;
        } else {
            lessonMaterialElement.innerHTML = "<p>Contenido no disponible para este tema o estilo de aprendizaje aún. ¡Estamos trabajando en ello!</p>";
        }
    }

    function hideLessonContent() {
        lessonContentDisplay.classList.remove('active'); // Desactivar para posibles estilos de transición
        lessonContentDisplay.classList.add('hidden'); // Ocultar el contenido de la lección

        // Obtener la página de asignatura activa antes de ocultar las otras (si existe)
        let previouslyActiveSubjectId = null;
        document.querySelectorAll('.subject-page').forEach(page => {
            // Verifica si tiene la clase 'active' que indica que estaba siendo mostrada
            if (page.classList.contains('active')) {
                previouslyActiveSubjectId = page.id.replace('-page', '');
                // No se remueve la clase 'active' aquí, ya que `showSubject` la gestionará.
                // Simplemente marcamos que existía una página activa.
            }
        });
        
        // Si había una página de asignatura activa, mostrarla de nuevo.
        // Si no, volver al contenido principal.
        if (previouslyActiveSubjectId) {
            showSubject(previouslyActiveSubjectId); // Re-activa la página de asignatura específica
        } else {
            showMainContent(); // Vuelve a la página principal
        }
    }

    // Simular que un juego interactivo ha sido completado
    function simulateGameCompletion(subject, topicId) {
        alert('¡Felicidades! Has completado el juego interactivo. Tu progreso ha sido guardado.');
        saveProgress(subject, topicId, 'completed');
        hideLessonContent(); // Oculta el contenido de la lección y vuelve al temario
    }


    // Iniciar cuestionario al cargar la página
    document.addEventListener('DOMContentLoaded', function() {
      showQuestion();
      // Asegurarse de que el contenido principal y las páginas de asignatura estén ocultas al inicio
      mainContent.classList.add('hidden');
      document.querySelectorAll('.subject-page').forEach(page => page.classList.add('hidden'));
      // Asegurarse de que el quiz-container se muestra, por si el CSS por defecto lo ocultaba
      quizContainer.classList.remove('hidden'); 
    });
  </script>
</body>
</html>

// App educativa "MultiGenio" con estilo juvenil, cuestionario inicial, resultados de estilo y materias adaptadas, y chatbot con IA

import { useState } from "react";

const questions = [
  {
    id: "q1",
    text: "¬øQu√© prefieres al estudiar?",
    options: ["Ver im√°genes o videos", "Escuchar explicaciones", "Moverte o hacer cosas", "Leer y escribir"],
  },
  {
    id: "q2",
    text: "¬øTe cuesta mantener la atenci√≥n mucho tiempo?",
    options: ["S√≠, con frecuencia", "A veces", "No mucho"],
  },
];

const detectLearningStyle = (answers) => {
  if (answers.q1 === "Ver im√°genes o videos") return "Visual";
  if (answers.q1 === "Escuchar explicaciones") return "Auditivo";
  if (answers.q1 === "Moverte o hacer cosas") return "Kinest√©sico";
  if (answers.q1 === "Leer y escribir") return "Escrito";
  return "Mixto";
};

export default function App() {
  const [step, setStep] = useState(0);
  const [answers, setAnswers] = useState({});
  const [style, setStyle] = useState(null);
  const [hasTDAH, setHasTDAH] = useState(false);
  const [chat, setChat] = useState("");
  const [response, setResponse] = useState("");

  const handleAnswer = (questionId, answer) => {
    const newAnswers = { ...answers, [questionId]: answer };
    setAnswers(newAnswers);

    if (questionId === "q2" && answer === "S√≠, con frecuencia") setHasTDAH(true);

    if (step + 1 < questions.length) {
      setStep(step + 1);
    } else {
      const detectedStyle = detectLearningStyle(newAnswers);
      setStyle(detectedStyle);
    }
  };

  const renderResources = () => (
    <div className="space-y-4 mt-6">
      <h2 className="text-xl font-bold">Recursos seg√∫n tu estilo: {style}</h2>
      <h3 className="text-lg font-semibold">üìò Lengua</h3>
      {style === "Visual" && <p>Mapas conceptuales de sintaxis, videos explicativos de morfolog√≠a, infograf√≠as de ortograf√≠a.</p>}
      {style === "Auditivo" && <p>Audios sobre tipos de palabras, reglas gramaticales narradas.</p>}
      {style === "Escrito" && <p>Ejercicios escritos, res√∫menes, reglas para copiar y memorizar.</p>}
      {style === "Kinest√©sico" && <p>Juegos interactivos para clasificar palabras y construir oraciones.</p>}

      <h3 className="text-lg font-semibold">üî¢ Matem√°ticas</h3>
      {style === "Visual" && <p>Esquemas de operaciones, videos de problemas visuales.</p>}
      {style === "Auditivo" && <p>Explicaciones habladas de resoluci√≥n de problemas.</p>}
      {style === "Escrito" && <p>Listas de ejercicios resueltos paso a paso.</p>}
      {style === "Kinest√©sico" && <p>Juegos para practicar sumas, restas, problemas pr√°cticos.</p>}

      <h3 className="text-lg font-semibold">üåç Ingl√©s (A1‚ÄìB1)</h3>
      {style === "Visual" && <p>Flashcards con im√°genes, videos con subt√≠tulos.</p>}
      {style === "Auditivo" && <p>Podcasts, di√°logos grabados.</p>}
      {style === "Escrito" && <p>Lecturas simples, fichas de gram√°tica.</p>}
      {style === "Kinest√©sico" && <p>Juegos de vocabulario, apps con movimiento.</p>}

      {hasTDAH && (
        <div className="mt-4 p-3 bg-yellow-100 rounded">
          <h4 className="font-bold">‚ö° Recomendaciones para TDA-H</h4>
          <p>Contenidos divididos en bloques cortos, recompensas visuales, est√≠mulos constantes como sonido y color.</p>
        </div>
      )}

      {/* Chatbot */}
      <div className="mt-6">
        <h3 className="text-lg font-bold mb-2">ü§ñ Pregunta al Asistente</h3>
        <textarea
          className="w-full p-2 border rounded"
          placeholder="¬øQu√© quieres saber sobre una materia?"
          value={chat}
          onChange={(e) => setChat(e.target.value)}
        />
        <button
          className="mt-2 bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded"
          onClick={() => setResponse(`(Simulaci√≥n IA) Respuesta a: "${chat}"`)}
        >
          Preguntar
        </button>
        {response && <p className="mt-4 bg-gray-100 p-3 rounded">{response}</p>}
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 flex flex-col items-center justify-center p-6">
      <div className="bg-white p-8 rounded-2xl shadow-xl max-w-xl w-full">
        <h1 className="text-3xl font-bold text-center text-blue-600 mb-6">üéì MultiGenio: Tu App de Aprendizaje Inteligente</h1>
        {!style ? (
          <div>
            <p className="text-lg font-semibold mb-4">{questions[step].text}</p>
            <div className="space-y-2">
              {questions[step].options.map((opt) => (
                <button
                  key={opt}
                  onClick={() => handleAnswer(questions[step].id, opt)}
                  className="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-xl"
                >
                  {opt}
                </button>
              ))}
            </div>
          </div>
        ) : (
          renderResources()
        )}
      </div>
    </div>
  );
}
